
@{
    ViewBag.Title = "GetPatientData";
    Layout = "~/Views/Shared/_Admin.cshtml";
}


<div style="width:100%; margin:0 auto;">
    <br />
    <table id="myTable" class="table table-bordered table-hover table-striped">
        <thead>
            <tr>
                <th>SSNO</th>
                <th> Name</th>
                <th>DOB</th>
                <th>CONTACT</th>
                <th>ADDRESS</th>
                <th>EMAIL</th>
                <th>ROLL</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>

@*-----------------------------------------------------------------------------------------------*@

<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="color:aqua">

            </div>
            <div class="modal-body">
                <h3 style="color:green">Do You Wont To Delete This Records</h3>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>

                <input class="btn btn-danger btn-ok" type="submit" id="Delete" value="Delete" />
            </div>
        </div>
    </div>
</div>

@*-----------------------------------------------------------------------------------------------*@

<link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />

<script src="//cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>


<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>

<script>


    $(document).ready(function () {

        mediadatashow();
    });


    function mediadatashow() {

        var oTable = $("#myTable").dataTable();
        oTable.fnDestroy();
        oTable.fnClearTable();


        $("#myTable").dataTable({
            "ajax": {
                "url": "/Patient/GetPatientRecords",
                "type": "Post",
                "datatype": "json"
            },
            "columns": [
                { "data": "Ssno", "name": "Ssno" },
                { "data": "Name", "name": "Name" },
                { "data": "Dob", "name": "Dob" },
                { "data": "Contact", "name": "Contact" },
                { "data": "Address", "name": "Address" },
                { "data": "Email", "name": "Email" },
                { "data": "Roll", "name": "Roll" },

                {
                    "data": "", "name": "", "autoWidth": true,
                    render: function (data, type, row) {
                        return '<button class="btn" data-toggle="modal" data-target="#editmedia" onclick=editmediadata(' + row.Id + ');><i class="fa fa-edit" style="font-size:30px;color:#1E90FF"></i></button> <button class="btn" data-toggle="modal" data-target="#confirm-delete" onclick =deleterecords(' + row.Id + '); data-toggle="tooltip" data-placement="top" title="Delete"><i class="fa fa-trash-o" style="font-size:30px;color:red"></i></button >';
                    }
                }


            ],
            "serverSide": "true",
            "order": [0, "asc"],
            "processing": "true",
            "language": {
                "processing": "processing......please wait"
            }
        });

    };



    function deleterecords(p) {
        data = {};

        data.Id = p;

        $("#Delete").on("click", function (eve) {

            $.ajax({
                type: "POST",
                url: "/Patient/deleterecords",
                dataType: "json",
                data: data,
                success: function (response) {
                    if (response == "RecordsDelete") {
                        $('#confirm-delete').modal('hide');

                        mediadatashow();
                    }
                    else if (response == "Recordsnotdelete") {
                        alert("Records Not Delete");
                    }
                },
                error: function (message) {
                    mediadatashow();
                    console.log(message);
                }
            });
        });
    };
</script>


